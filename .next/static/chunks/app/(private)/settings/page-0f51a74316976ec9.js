(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[749],{1007:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1470:(e,a,t)=>{Promise.resolve().then(t.bind(t,8076))},8076:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var r=t(5155),s=t(2115),l=t(1007),i=t(9946);let n=(0,i.A)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),c=(0,i.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function o(){let[e,a]=(0,s.useState)({name:"",email:"",avatar:"",socials:{youtube:"",twitch:"",tiktok:"",facebook:"",instagram:"",twitter:""}}),[t,i]=(0,s.useState)(null),[o,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!1),[h,g]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=localStorage.getItem("token");e&&fetch("/api/user/settings",{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>e.json()).then(e=>{a(e),e.avatar&&d(e.avatar)})},[]);let p=(e,t)=>{a(a=>({...a,[e]:t}))},x=async()=>{let a=localStorage.getItem("token");if(a){m(!0),g(null);try{let r=new FormData;r.append("name",e.name),r.append("email",e.email),t&&r.append("avatar",t),Object.entries(e.socials).forEach(e=>{let[a,t]=e;r.append(a,t)});let s=await fetch("/api/user/settings",{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:r}),l=await s.json();if(!s.ok)throw Error(null==l?void 0:l.error);g("Altera\xe7\xf5es guardadas com sucesso!")}catch(e){g("Erro ao guardar altera\xe7\xf5es.")}finally{m(!1)}}};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#0f172a] via-[#10172A] to-[#0e1a2b] text-white p-6 grid grid-cols-1 md:grid-cols-6 gap-6",children:(0,r.jsxs)("div",{className:"md:col-span-6 bg-[#1e293b] rounded-2xl shadow-lg p-6 space-y-4",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,r.jsx)(l.A,{size:24})," Defini\xe7\xf5es do Perfil"]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[o?(0,r.jsx)("img",{src:(null==o?void 0:o.trim())||"/logo.jpg",alt:"Avatar",className:"w-20 h-20 rounded-md object-cover border border-gray-600"}):(0,r.jsx)("div",{className:"w-20 h-20 rounded-md bg-gray-700 flex items-center justify-center text-sm",children:"Sem avatar"}),(0,r.jsxs)("label",{className:"cursor-pointer flex items-center gap-2",children:[(0,r.jsx)(n,{size:18}),(0,r.jsx)("span",{className:"underline",children:"Escolher ficheiro"}),(0,r.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:e=>{var a;let t=null==(a=e.target.files)?void 0:a[0];if(!t)return;i(t);let r=new FileReader;r.onloadend=()=>d(r.result),r.readAsDataURL(t)}})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm mb-1",children:"Nome"}),(0,r.jsx)("input",{className:"w-full bg-[#161c2a] text-white p-2 rounded-md",value:e.name,onChange:e=>p("name",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm mb-1",children:"Email"}),(0,r.jsx)("input",{className:"w-full bg-[#161c2a] text-white p-2 rounded-md",value:e.email,onChange:e=>p("email",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-lg font-semibold mb-2",children:"Redes Sociais"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:Object.entries(e.socials).map(e=>{let[t,s]=e;return(0,r.jsx)("input",{placeholder:t,className:"w-full bg-[#161c2a] text-white p-2 rounded-md",value:s,onChange:e=>{var r;return r=e.target.value,void a(e=>({...e,socials:{...e.socials,[t]:r}}))}},t)})})]}),(0,r.jsxs)("div",{className:"pt-4 flex items-center gap-4",children:[(0,r.jsxs)("button",{className:"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded flex items-center gap-2",onClick:x,disabled:u,children:[(0,r.jsx)(c,{size:18}),u?"A guardar...":"Guardar"]}),h&&(0,r.jsx)("span",{className:"text-sm",children:h})]})]})})}},9946:(e,a,t)=>{"use strict";t.d(a,{A:()=>c});var r=t(2115);let s=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},l=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,r.forwardRef)((e,a)=>{let{color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:a,...i,width:s,height:s,stroke:t,strokeWidth:c?24*Number(n)/Number(s):n,className:l("lucide",o),...!d&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[a,t]=e;return(0,r.createElement)(a,t)}),...Array.isArray(d)?d:[d]])}),c=(e,a)=>{let t=(0,r.forwardRef)((t,i)=>{let{className:c,...o}=t;return(0,r.createElement)(n,{ref:i,iconNode:a,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...o})});return t.displayName=s(e),t}}},e=>{e.O(0,[441,964,358],()=>e(e.s=1470)),_N_E=e.O()}]);